"use strict";window.app=window.app||{};app.Router=Backbone.Router.extend({routes:{'':'index','about':'about','history':'history','ladder':'ladder','settings':'settings','logout':'logout'},currentView:null,initialize:function initialize(options){if(app.debug)console.log('router init');this.authModel=options.authModel;this.gameStatsModel=options.gameStatsModel;this.lastWinnerModel=options.lastWinnerModel;this.gameModel=options.gameModel;this.itemsModel=options.itemsModel;this.historyModel=options.historyModel;this.ladderModel=options.ladderModel;},index:function index(){if(app.debug)console.log('main called');var view=new app.MainPageView({authModel:this.authModel,gameStatsModel:this.gameStatsModel,gameModel:this.gameModel,itemsModel:this.itemsModel});this.changeView(view);},about:function about(){if(app.debug)console.log('about called');var view=new app.AboutPageView({}).render();this.changeView(view);},history:function history(){if(app.debug)console.log('history called');var view=new app.HistoryPageView({model:this.historyModel}).render();this.changeView(view);},ladder:function ladder(){if(app.debug)console.log('ladder called');var view=new app.LadderPageView({gameStatsModel:this.gameStatsModel,model:this.ladderModel}).render();this.changeView(view);},settings:function settings(){if(app.debug)console.log('settings called');var view=new app.SettingsPageView({authModel:this.authModel}).render();this.changeView(view);},logout:function logout(){if(app.debug)console.log('logout called');if(app.domain==='com'){window.location.replace(app.curBackend+'authCom/logout');}else{window.location.replace(app.curBackend+'auth/logout');}},changeView:function changeView(view){if(this.currentView!==null&&this.currentView.cid!=view.cid){this.currentView.remove();}
this.currentView=view;}});